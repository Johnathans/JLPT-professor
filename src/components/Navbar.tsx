'use client';

import React from 'react';
import { Search, Home, BarChart2, Bell, Heart, CreditCard, LogOut, Moon, Sun } from 'react-feather';
import styles from '@/styles/dashboard.module.css';
import { useColorMode } from '@/contexts/ThemeContext';
import Link from 'next/link';
import { usePathname } from 'next/navigation';

interface NavbarProps {
  className?: string;
  forceDarkMode?: boolean;
}

const Navbar: React.FC<NavbarProps> = ({ className, forceDarkMode }) => {
  const { isDarkMode: contextDarkMode, toggleDarkMode } = useColorMode();
  const isDarkMode = forceDarkMode !== undefined ? forceDarkMode : contextDarkMode;
  const pathname = usePathname();

  return (
    <nav className={`${styles.nav} ${className || ''}`}>
      <div className={styles.navHeader}>
        <div className={styles.logo}>
          <div className={styles.logoIcon}>
            {isDarkMode ? (
              <svg width="42" height="42" viewBox="0 0 33 33" xmlns="http://www.w3.org/2000/svg" className={styles.logoSvg}>
                <g fill="#fff">
                  <path d="M18.07,21.455l-1.546,0.676c-0.009,0.004-0.018,0.008-0.025,0.01c-0.008-0.002-0.017-0.006-0.025-0.01   l-1.546-0.676c-0.595-0.145-1.079,0.12-1.079,0.588v0.187c0,0.467,0,0.674,0,1.143v0.187c0,0.468,0.484,0.732,1.079,0.588   l1.546-0.676c0.009-0.004,0.018-0.008,0.025-0.01c0.008,0.002,0.017,0.006,0.025,0.01l1.546,0.676   c0.594,0.145,1.078-0.12,1.078-0.588v-0.187c0-0.469,0-0.676,0-1.143v-0.187C19.148,21.575,18.664,21.311,18.07,21.455z" />
                  <path d="M18.483,15.802c-0.506-0.078-1.271-0.092-1.982-0.078H16.5c-0.712-0.014-1.477,0-1.981,0.078   c-1.191,0.186-1.596,2.01-1.596,2.01c0.942,0.033,2.664-0.205,3.578-0.205c0.913,0,2.635,0.238,3.578,0.205   C20.079,17.812,19.675,15.987,18.483,15.802z" />
                  <path d="M19.235,9.574c-1.178,0-2.156,0.851-2.363,1.969h-0.746c-0.207-1.118-1.186-1.969-2.363-1.969   c-1.326,0-2.406,1.078-2.406,2.405s1.08,2.407,2.406,2.407c1.178,0,2.156-0.852,2.363-1.971h0.746   c0.207,1.119,1.186,1.971,2.363,1.971c1.326,0,2.406-1.08,2.406-2.407S20.562,9.574,19.235,9.574z M13.763,13.515   c-0.846,0-1.533-0.689-1.533-1.535c0-0.845,0.688-1.533,1.533-1.533c0.847,0,1.535,0.688,1.535,1.533   C15.298,12.825,14.609,13.515,13.763,13.515z M19.235,13.515c-0.846,0-1.534-0.689-1.534-1.535c0-0.845,0.688-1.533,1.534-1.533   s1.533,0.688,1.533,1.533C20.769,12.825,20.081,13.515,19.235,13.515z" />
                  <path d="M26.972,9.127l1.088,0.353l-0.501-1.024c-0.556-1.133-1.256-1.893-1.798-2.359   c0.211-0.034,0.436-0.051,0.67-0.051c0.69,0,1.227,0.15,1.232,0.15l1.309,0.371l-0.779-1.113C25.329,1.359,21.867,0.5,19.468,0.5   c-1.366,0-2.446,0.288-2.968,0.501h-0.001C15.978,0.788,14.897,0.5,13.532,0.5c-2.4,0-5.863,0.859-8.726,4.953L4.028,6.566   l1.309-0.371c0.006,0,0.541-0.15,1.23-0.15c0.235,0,0.459,0.017,0.671,0.051C6.696,6.563,5.995,7.322,5.44,8.455l-0.5,1.024   l1.087-0.353c0.004,0,0.38-0.121,0.904-0.121c0.32,0,0.624,0.044,0.908,0.13C7.341,9.714,6.73,10.777,6.798,12.48l0.059,1.458   l0.826-1.204c0.094-0.137,0.252-0.338,0.444-0.553c-0.036,1.135,0.632,2.389,0.64,2.405c0.305,0.552,0.721,0.803,1.057,0.919   c0.237,0.922,0.797,2.603,1.902,3.854c-0.369,0.268-0.846,0.523-1.195,0.693c0,0-0.756,0.254-1.291,0.499   c-1.375,0.63-3.754,1.965-4.129,3.803c-0.211,1.029,0.209,2.038,1.248,2.998c3.055,2.818,8.979,4.778,9.883,5.066l0.258,0.081   l0.145-0.045c0.275-0.086,6.767-2.123,9.997-5.103c1.039-0.96,1.459-1.969,1.247-2.998c-0.377-1.845-2.772-3.183-4.144-3.81   c-0.082-0.037-1.276-0.492-1.276-0.492c-0.35-0.17-0.824-0.424-1.195-0.693c1.105-1.251,1.666-2.931,1.904-3.854   c0.335-0.116,0.751-0.367,1.055-0.919c0.009-0.017,0.678-1.271,0.641-2.405c0.192,0.215,0.351,0.416,0.444,0.553l0.825,1.204   L26.2,12.48c0.068-1.703-0.541-2.767-1.041-3.345c0.284-0.086,0.588-0.13,0.908-0.13C26.591,9.006,26.968,9.127,26.972,9.127z    M22.281,20.91l-5.782,6.656l-5.782-6.656c0.37-0.188,1.253-0.637,1.64-0.936c0.703,0.572,1.576,0.958,2.657,0.972l1.476,0.018   h0.01h0.01l1.476-0.018c1.081-0.014,1.954-0.399,2.657-0.972C21.028,20.273,21.911,20.723,22.281,20.91z M23.383,14.119   c-0.204,0.369-0.479,0.479-0.675,0.506l-0.331,0.046l-0.074,0.326c-0.265,1.159-1.358,4.942-4.331,4.98l-1.459,0.017h-0.025   l-1.459-0.017c-2.974-0.038-4.067-3.821-4.332-4.98l-0.074-0.326l-0.332-0.046c-0.195-0.027-0.471-0.137-0.674-0.506   c-0.293-0.533-0.75-1.922-0.47-2.488c0.069-0.142,0.303-0.384,0.606-0.516c0,0,0.377-0.151,0.68-0.098   c0.36,0.063,0.813,0.108,0.813,0.108s-0.285-1.909,0.541-3.107c0.729-1.06,2.315-1.596,4.713-1.596H16.5   c2.397,0,3.983,0.536,4.714,1.596c0.826,1.198,0.539,3.107,0.539,3.107c0.001,0,0.453-0.046,0.814-0.108   c0.301-0.054,0.678,0.098,0.678,0.098c0.305,0.132,0.537,0.374,0.607,0.516C24.133,12.197,23.676,13.586,23.383,14.119z    M24.036,9.406c0.036,0.023,0.723,0.477,1.041,1.599c-0.648-0.587-1.58-1.119-2.468-0.959c0.073-0.715,0.013-1.692-0.599-2.578   c-0.922-1.337-2.775-2.014-5.511-2.014h-0.001c-2.735,0-4.59,0.677-5.511,2.014c-0.61,0.886-0.673,1.863-0.599,2.578   c-0.887-0.16-1.818,0.372-2.467,0.959C8.24,9.883,8.927,9.43,8.963,9.406l0.683-0.418l-0.688-0.41   c-0.6-0.359-1.282-0.541-2.026-0.541c-0.045,0-0.089,0.001-0.132,0.002C7.616,6.843,8.525,6.355,8.535,6.35l0.87-0.446L8.522,5.482   c-0.635-0.303-1.441-0.436-2.215-0.4c4.258-5.113,9.452-3.425,9.943-3.131L16.499,2.1H16.5l0.249-0.148   c0.49-0.294,5.686-1.982,9.943,3.131c-0.774-0.035-1.582,0.098-2.216,0.4l-0.882,0.421l0.869,0.446   c0.01,0.006,0.918,0.493,1.735,1.689c-0.044-0.001-0.087-0.002-0.132-0.002c-0.744,0-1.426,0.182-2.026,0.541l-0.687,0.41   L24.036,9.406z" />
                </g>
              </svg>
            ) : (
              <img 
                src="/assets/1169415_professor_teacher_scientist_icon.svg" 
                alt="Professor" 
                className={styles.logoSvg}
              />
            )}
          </div>
          <span className={styles.logoText}>JLPT Professor</span>
        </div>
      </div>

      <div className={styles.searchContainer}>
        <Search size={20} className={styles.searchIcon} />
        <input type="text" placeholder="Search..." className={styles.searchInput} />
      </div>

      <div className={styles.navContent}>
        <Link href="/dashboard" className={styles.navLink}>
          <div className={`${styles.navItem} ${pathname === '/dashboard' ? styles.active : ''}`}>
            <Home size={20} />
            <span>Dashboard</span>
          </div>
        </Link>
        <Link href="/study" className={styles.navLink}>
          <div className={`${styles.navItem} ${pathname === '/study' ? styles.active : ''}`}>
            <BarChart2 size={20} />
            <span>Study</span>
          </div>
        </Link>
        <div className={styles.navItem}>
          <Bell size={20} />
          <span>Notifications</span>
        </div>
        <div className={styles.navItem}>
          <Heart size={20} />
          <span>Favorites</span>
        </div>
        <div className={styles.navItem}>
          <CreditCard size={20} />
          <span>Study Cards</span>
        </div>
      </div>

      <div className={styles.navFooter}>
        <div className={styles.navItem}>
          <LogOut size={20} />
          <span>Logout</span>
        </div>
        <div className={styles.navItem} onClick={toggleDarkMode}>
          {isDarkMode ? <Sun size={20} /> : <Moon size={20} />}
          <span>{isDarkMode ? 'Light Mode' : 'Dark Mode'}</span>
          <div className={`${styles.toggle} ${isDarkMode ? styles.active : ''}`}>
            <div className={styles.toggleThumb} />
          </div>
        </div>
      </div>
    </nav>
  );
};

export default Navbar;
